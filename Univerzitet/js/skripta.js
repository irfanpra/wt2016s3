var novostii = [
		new novost(
					new Date("Jan 10, 2016 11:13:00"), 
					"Univerzitetu u Sarajevu premijerno prikazan dokumentarni film o Višegradu",
					 "U prepunoj svečanoj sali Univerziteta u Sarajevu u četvrtak 17. marta 2016. godine premijerno je prikazan novi dokumentarni film u produkciji Outreach programa Međunarodnog krivičnog suda za bivšu Jugoslaviju (MKSJ) – \„Zločini pred Tribunalom: Višegrad\“.", 
					 "slike/v0velika.jpg",
					 ["Projekciji je prisustvovalo više od 120 gledalaca, među kojima su bili predstavnici udruženja žrtava, uključujući preživjele iz Višegrada, nevladinih organizacija, pravosudnih organa, diplomatskog hora te studenti i akademsko osoblje Univerziteta.", 
					 "Prisutnima se obratio prof. dr. Muharem Avdispahić, dr. h. c., rektor Univerziteta u Sarajevu, te prilikom obraćanja istakao: \„Naš je zadatak obrazovati slobodne ljude, slobodne građane u slobodnom demokratskom društvu. Brisanje iluzija o prošlosti od presudne je važnosti za našu budućnost. Neophodno je pomoći procese koji će ukinuti zabranu sjećanja na nedavnu prošlost i vratiti prava da mladi znaju historijske istine. Na koji način tom doprinosi Outreach program Međunarodnog krivičnog suda za bivšu Jugoslaviju, imamo priliku vidjeti na primjeru filma 'Zločini pred Tribunalom: Višegrad'. Film neminovno u nama iznova pobuđuje i pitanje odnosa čovjeka i kolektiviteta, individualne ljudskosti i etičke odgovornosti pojedinca i zajednice.\“"
					 ]),
		new novost(
				   new Date("Jan 18, 2016 8:13:00"),
				   "Uspješna saradnja Univerziteta u Sarajevu i Univerziteta Sophia u Japanu",
				   "Prof. dr. Taro Komatsu sa Katedre za obrazovanje Univerziteta Sophia u Japanu posjetio je u ponedjeljak 21. marta 2016. godine Univerzitet u Sarajevu gdje se susreo sa rektorom prof. dr. Muharemom Avdispahićem, dr. h. c., i prorektorom prof. dr. Ugom Vlaisavljevićem.",
				   "slike/v1velika.jpg",
				   ["Rektor prof. dr. Muharem Avdispahić je, uz riječi dobrodošlice profesoru Komatsuu, predstavio aktivnosti Univerziteta u Sarajevu, istakavši sveobuhvatnost Univerziteta koji pokriva oblasti humanističkih, društvenih, medicinskih, prirodno-matematičkih i biotehničkih te tehničkih nauka i umjetnosti. Istaknut je značaj međuuniverzitetske saradnje, te su razmatrane mogućnosti unapređenja i intenziviranja akademske saradnje između Univerziteta u Sarajevu i Univerziteta Sophia u Japanu. Također, rektor Avdispahić je istakao uspješnu saradnju Univerziteta u Sarajevu i Ambasade Japana u BiH, te je naglašen izuzetan značaj kursa japanskog jezika koji se u saradnji sa Ambasadom na Univerzitetu u Sarajevu realizira od akademske 2013/2014. godine. U toku susreta razgovarano je o mogućnostima prerastanja ovog oblika učenja japanskog jezika u akademski program Univerziteta u Sarajevu.",
				   "Profesor Komatsu je, ocijenivši uspješnom saradnju Sarajevskog i Univerzitetu Sophia, podsjetio da je 2014. godine sa grupom studenata sa Univerziteta Sophia posjetio Filozofski fakultet Univerziteta u Sarajevu. Također, naveo je i da će narednog mjeseca doc. dr. Larisa Kasumagić sa Filozofskog fakulteta boraviti na Univerzitetu Sophia kao gostujući predavač."
				   ]),
		new novost(
				   new Date(2016, 2, 26),
				   "Održan Kick-off sastanak Radne grupe Upravnog odbora LNSS projekta u Brašovu (Rumunija)",
				   "Sastanak partnera Erasmus+ projekta „Library Network Support Services (LNSS): Modernising libraries in Western Balkan countries through staff development and reforming library services (CBHE 561987)“ održan je u periodu od 7. do 10. marta 2016. godine u Brašovu (Rumunija).",
				   "slike/v2velika.jpg",
				   ["Organizatori sastanaka bili su Transilvanijski univerzitet u Brašovu (Rumunija) te Tehnološki institut u Limericku (Irska), a sastanku su prisustvovali koordinatori projekta sa Transilvanijskog univerziteta u Brašovu, Tehnološkog instituta u Limericku, Univerziteta na Kritu (Grčka), Poljoprivrednog univerziteta u Tirani (Albanija), Univerziteta „Fan S. Noli” u Korči (Albanija), Kantonalne i univerzitetske biblioteke u Bihaću (BiH), Sveučilišta u Mostaru (BiH), Univerziteta u Tirani (Albanija), Univerziteta u Prištini, Kosovska Mitrovica, Kosovo (Kosovo under UNSC Resolution 1244/99), Univerziteta Crne Gore (Crna Gora) te Univerziteta u Sarajevu (BiH).",
				   "Predstavnici koordinatora projekta sa Tehnološkog instituta u Limericku prezentirali su temeljne ciljeve CBHE 561987 projekta, a potom je održan sastanak članova Radne grupe Upravnog odbora projekta na kojem su svi partneri kratko predstavili svoje institucije te učesnike projekta, svoje odgovornosti unutar projekta kao i potrebe i očekivanja u vezi s projektom. Na sastanku se potom detaljno diskutiralo o obavezama partnera u pogledu pisanja izvještaja, finansijskih izvještaja, izvještaja o mobilnosti te s tim u kauzalnoj vezi i strogim i složenim pravilima i zahtjevima Erasmus+ programa. Pažnja je posvećena i brojnim administrativnim pitanjima (konzorcijski sporazumi, interni i finalni izvještaji, upotreba loga projekta i slično) i radnim paketima projekta i to posebno: LNSS treningu, razvoju mrežnih modula, radionicama, kampanji Library National Awareness Days. Dogovoreno je da se naredni sastanak partnera održi u junu 2016. godine u Kantonalnoj i univerzitetskoj biblioteci u Bihaću (BiH) u periodu održavanja međunarodne konferencije o informacijskoj pismenosti."
				   ]),
		new novost(
				   new Date(2016, 2, 30),
				   "Održan sastanak bh. partnera u projektu \„Trans2Work\“",
				   "U petak 18. marta 2016. godine u Rektoratu Univerziteta u Sarajevu održan je sastanak bh. partnera u Erasmus+ projektu \„School to Work for Higher education students with disabilities in Serbia, Bosnia and Herzegovina and Montenegro\“ (Trans2Work) kojim koordinira Univerzitet Makedonija, Solun (Grčka).",
				   "slike/v3velika.jpg",
				   ["U projektu učestvuju 22 partnera: 6 partnera iz Bosne i Hercegovine: Univerzitet u Sarajevu, Univerzitet u Istočnom Sarajevu, Univerzitet u Banjoj Luci, NVO Humanitarna organizacija \„Partner\“, \„Profil MC\“ d.o.o., \„PROCOM\“ d.o.o.; 7 partnera iz Srbije: Univerzitet u Kragujevcu, Univerzitet u Novom Sadu, Univerzitet \„Metropolitan\“ u Beogradu, NVO Asocijacija studenata sa poteškoćama iz Srbije, Nacionalna služba za zapošljavanje Republike Srbije, Poslovna asocijacija \„Unija Čačak 2000\“, Balkanska mreža za obrazovanje na daljinu \„BADEN\“ Srbija, 4 iz Crne Gore: Univerzitet u Crnoj Gori, Univerzitet u Donjoj Gorici, Asocijacija mladih sa poteškoćama u Crnoj Gori, Agencija za zapošljavanje Crne Gore, te partneri: NVO \„Gnosi\“ iz Soluna (Grčka), Univerzitet u Mariboru, Univerzitet u Varšavi, DEKRA Akademie Gmbh iz Republike Njemačke i Univerzitet Makedonija u Solunu koji je koordinator projekta.",
				   "Sastanak je organiziran s ciljem međusobnog upoznavanja predstavnika bh. partnera, diskusije o do sada provedenim aktivnostima u okviru projekta i organiziranju predstojećeg sastanka cijelog konzorcija koji će se održati u Solunu od 29. do 31. 3. 2016. godine."
				   ]),
		new novost (
					new Date(2016, 2, 31),
					"Erasmus+ međunarodna kreditna mobilnost – info dan",
					"",
					"slike/v4velika.jpg",
					["Obavještavamo sve zainteresirane studente, nastavnike i saradnike Univerziteta u Sarajevu da će info dan o Erasmus+ konkursima (međunarodna kreditna mobilnost) biti održan u četvrtak 31. marta 2016. godine sa početkom u 14:00 sati u svečanoj sali Univerziteta u Sarajevu (Obala Kulina bana 7/II).", 
					"Na info danu će biti predstavljeni aktuelni konkursi u okviru Erasmus+ programa koji se odnose na međunarodnu razmjenu studenata, nastavnika i saradnika, te biti objašnjen način prijavljivanja i prikupljanja potrebnih dokumenata."
					]),
		new novost(
				   new Date(2016, 3, 1),
				   "Predavanje na Poljoprivredno-prehrambenom fakultetu o temi \„GMO kontroverze\“",
				   "",
				   "slike/v5velika.jpg",
				   ["Poljoprivredno-prehrambeni fakultet Univerziteta u Sarajevu organizira javno stručno predavanje o genetski modificiranim organizmima koje će biti održano na Poljoprivredno-prehrambenom fakultetu Univerziteta u Sarajevu (amfiteatar 1) u utorak 22. marta 2016. godine s početkom u 10:00 sati.",
				   "Predavanje \„GMO kontroverze\“ održat će biohemičar prof. dr. Zoran Popovski sa Poljoprivrednog fakulteta Univerziteta \„Sv. Ćirilo i Metodije\“ u Skoplju."
				   ]),
		new novost(
				   new Date(2016, 3, 2),
				   "Naučni skup sa međunarodnim učešćem o temi \„Biodiverzitet i šumarstvo\”",
				   "",
				   "slike/v6velika.jpg",
				   ["Zadovoljstvo nam je pozvati vas da učestvujete na naučnom skupu sa međunarodnim učešćem o temi „Biodiverzitet i šumarstvo” koji će se održati u Sarajevu 4. aprila 2016. godine."
				   ]),
		new novost(
				   new Date(2016, 3, 8),
				   "Promocija izdanja Instituta za jezik Univerziteta u Sarajevu",
				   "Promocija izdanja Instituta za jezik Univerziteta u Sarajevu iz 2015. godine bit će održana u četvrtak 31. marta 2016. godine u svečanoj sali Univerziteta u Sarajevu sa početkom u 13:00 sati.",
				   "slike/v7velika.jpg",
				   ["O izdanjima Instituta za jezik govorit će promotori: prof. dr. Dževad Jahić, prof. dr. Amela Šehović, prof. dr. Josip Baotić, emeritus, doc. dr. Elvira Dilberović, dr. sc. Eli Tauber i prof. dr. Mirjana Popović, a moderatorica promocije bit će mr. sc. Aida Kršo."
				   ]),
		new novost(
				   new Date(2016, 3, 15),
				   "Dodijeljeno 95 stipendija iz Fonda „Suada Dilberović“ studentima Univerziteta u Sarajevu vise teksta da vidimo sta bi bilo kad bi bilo moze jos teksta slobodno",
				   "U akademskoj 2015/2016. godini Univerzitet u Sarajevu je iz Fonda \„Suada Dilberović\“, iz kojeg se finansiraju socijalno ugroženi studenti fakulteta i akademija Univerziteta u Sarajevu, dodijelio stipendije za 95 studenata Univerziteta u Sarajevu.",
				   "slike/v8velika.jpg",
				   ["Potpisivanje ugovora o dodjeli stipendija iz Fonda \„Suada Dilberović\“ upriličeno je u četvrtak 31. marta 2016. godine u svečanoj sali Univerziteta u Sarajevu. Ugovore su potpisali prof. dr. Muharem Avdispahić, dr. h. c., rektor Univerziteta u Sarajevu, i studenti dobitnici stipendija iz Fonda \„Suada Dilberović\“, a potpisivanju su prisustvovali i prorektori Univerziteta: prof. dr. Zehra Kreho i prof. dr. Faruk Mekić.",
				   "Uz čestitke upućene studentima, rektor Avdispahić je istakao da se nada da će im stipendije pomoći tokom studiranja, te naglasio da dodjelom stipendija Univerzitet u Sarajevu pokazuje svoju društvenu odgovornost. Rektor Avdispahić je podsjetio da je Univerzitet u Sarajevu raspisao i Konkurs za dodjelu sredstava iz Fonda \„Akademik Edhem Čamo\“ kao podršku razvoju naučnoistraživačke i umjetničke misli studenata Univerziteta u Sarajevu u akademskoj 2015/2016. godini. Konkurs je otvoren do 3. aprila 2016. godine."
				   ]),
		new novost(
			       new Date(2016, 3, 22),
			       "Održana \„Manifestacija kineske kulture\“",
			       "U nedjelju 27. marta 2016. godine na Trgu djece Sarajeva održana je \„Manifestacija kineske kulture\“ koju su organizirali Univerzitet u Sarajevu i Konfučijev institut Univerziteta u Sarajevu i time obilježili početak djelovanja Konfučijevog instituta.",
			       "slike/v9velika.jpg",
			       ["Tom prilikom predstavnici Konfučijevog instituta su prezentirali različite aspekte kineske kulture: tradicionalnu kinesku muziku, kaligrafiju, izrađivanje figura od papira, ceremoniju ispijanja čaja te vještinu tai-čija (tai chi).",
			       "Istaknuto je da je Konfučijev institut Univerziteta u Sarajevu svečano otvoren 2. aprila 2015. godine, te da je njegov osnovni cilj upoznavanje građana i građanki Bosne i Hercegovine sa velikom, pet hiljada godina starom kineskom kulturom.",
			       "Prisutni su imali priliku da u razgovoru s predstavnicima Instituta dobiju informacije o, u ovoj fazi, besplatnim kursevima kineskog jezika za sve uzraste kao i drugim aktivnostima Konfučijevog instituta."
			       ]),
		new novost(
			       new Date(),
			       "Najavljena saradnja sa Univerzitetom Northwestern u Chicagu",
			       "Predstavnici Univerziteta Northwestern u Chicagu (SAD), doc. dr. Peter Locke i gospođa Karey Fuhs, su zajedno sa doc. dr. Eminom Kiseljaković sa Medicinskog fakulteta Univerziteta u Sarajevu u petak 25. marta 2016. godine posjetili Rektorat Univerziteta u Sarajevu gdje su se susreli sa rektorom prof. dr. Muharemom Avdispahićem, dr. h. c.",
			       "slike/v10velika.jpg",
			       ["U toku susreta razgovarano je o modalitetima saradnje te o potpisivanju memoranduma o razumijevanju između Univerziteta u Sarajevu i Univerziteta Northwestern u Chicagu.",
			       "Posebna pažnja posvećena je razgovorima o organiziranju ljetne škole \„Javno zdravstvo\“ čiji je početak planiran u drugoj polovini jula 2016. Učesnici ljetne škole bit će studenti Univerziteta Northwestern u Chicagu, a ljetna škola će se realizirati na Medicinskom fakultetu, Fakultetu zdravstvenih studija i Filozofskom fakultetu Univerziteta u Sarajevu. Ljetna škola će se fokusirati na javno zdravstvo, ali će učesnici imati priliku upoznati se i sa historijom i kulturom Bosne i Hercegovine."
			       ]),
		new novost(
				   new Date(),
				   "Naslov",
				   "Podnaslov",
				   "slike/v11velika.jpg",
				   ["Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
				   "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
				   "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
				   ])

		];

// Pretpostavljamo da je glavna novost prva u nizu novosti
var glavnaNovost;
var filterNovosti;
var novosti;

function popuniNovosti() {
	var text = document.getElementById('data').innerHTML;
	novosti = new Array();

	var niz = text.split(',,');
	niz.splice(niz.length - 1, 1);

	for (var i = 0; i < niz.length; i = i + 5) {
		var datum = new Date(parseInt(niz[i]) * 1000);
		var naslov = niz[i+1];
		var podnaslov = niz[i+2];
		var slika = niz[i+3];
		var text = niz[i+4];
		var paragrafi = text.split("\n");
		novosti.push(new novost(datum, naslov, podnaslov, slika, paragrafi));
		
	}

	glavnaNovost = novosti[novosti.length - 1];
	filterNovosti = novosti;

	document.getElementById('datumNovosti').innerHTML = dajVrijemeObjave(glavnaNovost.datumObjave);
	document.getElementById('naslovVijesti').innerHTML = glavnaNovost.naslov;
	document.getElementById('podnaslovVijesti').innerHTML = glavnaNovost.podnaslov;
	document.getElementById('slikaVijesti').src = glavnaNovost.linkSlike;
	paragrafi = document.getElementById('paragrafi');
	paragrafi.innerHTML = "";
	var i = 0;
	for(i = 0; i < glavnaNovost.paragrafi.length; i++)
	{
		paragrafi.innerHTML += "<p>" + glavnaNovost.paragrafi[i] + "</p>";
	}
	sortirajNovosti('datum');
}

function promijeniNovost(id) {
	glavnaNovost = filterNovosti[id];

	document.getElementById('datumNovosti').innerHTML = dajVrijemeObjave(glavnaNovost.datumObjave);
	document.getElementById('naslovVijesti').innerHTML = glavnaNovost.naslov;
	document.getElementById('podnaslovVijesti').innerHTML = glavnaNovost.podnaslov;
	document.getElementById('slikaVijesti').src = glavnaNovost.linkSlike;
	paragrafi = document.getElementById('paragrafi');
	paragrafi.innerHTML = "";
	var i = 0;
	for(i = 0; i < glavnaNovost.paragrafi.length; i++)
	{
		paragrafi.innerHTML += "<p>" + glavnaNovost.paragrafi[i] + "</p>";
	}
}
function novost(datum, naslov, podnaslov, slika, paragrafi) {
	this.datumObjave = datum;
	this.naslov = naslov;
	this.podnaslov = podnaslov;
	this.linkSlike = slika;
	this.paragrafi = paragrafi;
}

function dajVrijemeObjave(datumObjave) {
	var sada = new Date();
	var diff = sada - datumObjave;

	if (diff < 60 * 1000) return "Novost objavljena prije par sekundi";
	else if (diff < 60 * 1000 * 60) {
		// Novost objavljena prije x minuta
		var x = Math.floor(diff / (60 * 1000));
		return "Novost je objavljena prije " + x + " " + getMinutaObjave(x);
	} else if (diff < 60 * 1000 * 60 * 24) {
		// Novost je objavljena prije x sati
		var x = Math.floor(diff / (60 * 1000 * 60));
		return "Novost je objavljena prije " + x + " " + getSateObjave(x);
	} else if (diff < 60 * 1000 * 60 * 24 * 7) {
		// Novost je objavljena prije x dana
		var x = Math.floor(diff / (60 * 1000 * 60 * 24));
		return "Novost je objavljena prije " + x + " " + getDaneObjave(x);
	} else if (diff < 60 * 1000 * 60 * 24 * 30) {
		// Novost je objavljena prije x sedmica
		var x = Math.floor(diff / (60 * 1000 * 60 * 24 * 7));
		return "Novost je objavljena prije " + x + " " + getSedmiceObjave(x);
	}
	return datumObjave.toLocaleDateString();
}

function getMinutaObjave(x) {
	if(x == 1) return "minutu";
	else if(x < 5) return "minute";
	return "minuta";
}

function getSateObjave(x) {
	if(x == 1 || x == 21) return "sat";
	else if(x < 5 || x > 21) return "sata";
	return "sati";
}

function getDaneObjave(x) {
	if(x == 1) return "dan";
	return "dana";
}

function getSedmiceObjave(x) {
	if (x == 1) return "sedmicu";
	else if(x < 5) return "sedmice";
	return "sedmica"; 
}

function filtrirajNovosti(filter) {
	var maleNovosti = document.getElementById('maleNovosti');
	maleNovosti.innerHTML = "";
	
	if (filter == "danas") filterNovosti = novosti.filter(isDanasnjaNovost); 
    else if(filter == "sedmica") filterNovosti = novosti.filter(isSedmicnaNovost);
    else if(filter == "mjesec") filterNovosti = novosti.filter(isMjesecnaNovost);
    else filterNovosti = novosti;
	
	var i = 0;
	for(i = 0; i < filterNovosti.length; i++) {
			maleNovosti.innerHTML += "<div onclick='promijeniNovost("+ i + ")' class='floating-vijest'><div id='imgcon'><img src='" + filterNovosti[i].linkSlike + "'" + " alt='malavijest'></div><h3>" + filterNovosti[i].naslov + "</h3></div>";
	}
}

function isDanasnjaNovost(n) {
	var sada = new Date();
	return n.datumObjave.getFullYear() == sada.getFullYear() && n.datumObjave.getMonth() == sada.getMonth() && n.datumObjave.getDate() == sada.getDate();
}

function isMjesecnaNovost(n) {
	var sada = new Date();
	return n.datumObjave.getFullYear() == sada.getFullYear() && n.datumObjave.getMonth() == sada.getMonth();
}

function isSedmicnaNovost(n) {
	var sada = new Date();
	return n.datumObjave >= ponedjeljak(sada) && sljedeciPonedjeljak(n);
}

function ponedjeljak(n) {
	if (n.getDay() != 0) var milis = (n.getDay() - 1)  * 60 * 1000 * 60 * 24;
	else var milis = 6 * 60 * 1000 * 60 * 24;
	var pon = new Date(n - milis);
	return new Date(pon.getFullYear(), pon.getMonth(), pon.getDate());
}

function sljedeciPonedjeljak(n) {
	var pon = ponedjeljak(new Date());
	return n.datumObjave - pon < 7 * 24 * 60 * 60 * 1000;
}

function sortirajNovosti(kriterij) {
	maleNovosti.innerHTML = "";

	if(kriterij == "datum") {
		filterNovosti.sort(function(n1, n2) { return n2.datumObjave - n1.datumObjave; });
	} else if(kriterij = "abeceda") {
		filterNovosti.sort(compare);
	}
	var i = 0;
	for(i = 0; i < filterNovosti.length; i++) {
			maleNovosti.innerHTML += "<div onclick='promijeniNovost("+ i + ")' class='floating-vijest'><div id='imgcon'><img src='" + filterNovosti[i].linkSlike + "'" + " alt='malavijest'></div><h3>" + filterNovosti[i].naslov + "</h3></div>";
	}
}

function compare(n1, n2) {
	if(n1.naslov < n2.naslov)
		return -1;
	else if(n1.naslov > n2.naslov)
		return 1;
	return 0;
}